{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Redis Helm Chart Values Schema",
  "description": "Schema for Redis Helm chart values",
  "properties": {
    "global": {
      "type": "object",
      "title": "Global parameters",
      "description": "Global Docker image parameters",
      "properties": {
        "imageRegistry": {
          "type": "string",
          "title": "Global Docker Image Registry",
          "description": "Global Docker image registry"
        },
        "imagePullSecrets": {
          "type": "array",
          "title": "Global Image Pull Secrets",
          "description": "Global Docker registry secret names as an array of objects",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "title": "Secret Name",
                "description": "Name of the image pull secret"
              }
            },
            "required": ["name"]
          }
        }
      }
    },
    "nameOverride": {
      "type": "string",
      "title": "Name Override",
      "description": "String to partially override redis.fullname"
    },
    "fullnameOverride": {
      "type": "string",
      "title": "Full Name Override",
      "description": "String to fully override redis.fullname"
    },
    "namespaceOverride": {
      "type": "string",
      "title": "Namespace Override",
      "description": "String to override the namespace for all resources"
    },
    "commonLabels": {
      "type": "object",
      "title": "Common Labels",
      "description": "Labels to add to all deployed objects",
      "additionalProperties": {
        "type": "string"
      }
    },
    "commonAnnotations": {
      "type": "object",
      "title": "Common Annotations",
      "description": "Annotations to add to all deployed objects",
      "additionalProperties": {
        "type": "string"
      }
    },
    "image": {
      "type": "object",
      "title": "Redis Image Configuration",
      "description": "Configuration for Redis container image",
      "properties": {
        "registry": {
          "type": "string",
          "title": "Redis Image Registry",
          "description": "Redis image registry"
        },
        "repository": {
          "type": "string",
          "title": "Redis Image Repository",
          "description": "Redis image repository"
        },
        "tag": {
          "type": "string",
          "title": "Redis Image Tag",
          "description": "Redis image tag with digest"
        },
        "pullPolicy": {
          "type": "string",
          "title": "Redis Image Pull Policy",
          "description": "Redis image pull policy",
          "enum": ["Always", "Never", "IfNotPresent"]
        }
      }
    },
    "replicaCount": {
      "type": "integer",
      "title": "Replica Count",
      "description": "Number of Redis replicas to deploy",
      "minimum": 1
    },
    "ipFamily": {
      "type": "string",
      "title": "IP Family",
      "description": "IP family to use for replica and sentinel announce IPs. 'auto' uses the first IP from hostname -i, 'ipv4' forces IPv4, 'ipv6' forces IPv6. Falls back to available IP family with warning if requested family is not available.",
      "enum": ["auto", "ipv4", "ipv6"],
      "default": "auto"
    },
    "architecture": {
      "type": "string",
      "title": "Redis Architecture",
      "description": "Redis architecture. Allowed values: standalone or replication",
      "enum": ["standalone", "replication"],
      "default": "standalone"
    },
    "service": {
      "type": "object",
      "title": "Service Configuration",
      "description": "Kubernetes service configuration",
      "properties": {
        "type": {
          "type": "string",
          "title": "Service Type",
          "description": "Kubernetes service type",
          "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]
        },
        "port": {
          "type": "integer",
          "title": "Service Port",
          "description": "Redis service port",
          "minimum": 1,
          "maximum": 65535
        }
      }
    },
    "auth": {
      "type": "object",
      "title": "Redis Authentication",
      "description": "Authentication configuration for Redis",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Authentication",
          "description": "Enable Redis authentication"
        },
        "password": {
          "type": "string",
          "title": "Redis Password",
          "description": "Redis password (if empty, random password will be generated)"
        },
        "existingSecret": {
          "type": "string",
          "title": "Existing Secret",
          "description": "Name of existing secret containing Redis password"
        },
        "existingSecretPasswordKey": {
          "type": "string",
          "title": "Existing Secret Password Key",
          "description": "Key in existing secret containing Redis password"
        }
      }
    },
    "config": {
      "type": "object",
      "title": "Redis Configuration",
      "description": "Redis configuration options",
      "properties": {
        "mountPath": {
          "type": "string",
          "title": "Config Mount Path",
          "description": "Redis configuration mount path"
        },
        "content": {
          "type": "string",
          "title": "Config Content",
          "description": "Include your custom Redis configurations here as string"
        },
        "existingConfigmap": {
          "type": "string",
          "title": "Existing ConfigMap",
          "description": "Name of an existing Configmap to use instead of creating one"
        },
        "existingConfigmapKey": {
          "type": "string",
          "title": "Existing ConfigMap Key",
          "description": "Name of the key in the Configmap that should be used"
        }
      }
    },
    "persistence": {
      "type": "object",
      "title": "Persistence Configuration",
      "description": "Persistence configuration using Persistent Volume Claims",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Persistence",
          "description": "Enable persistent storage"
        },
        "storageClass": {
          "type": "string",
          "title": "Storage Class",
          "description": "Storage class to use for persistent volume"
        },
        "accessMode": {
          "type": "string",
          "title": "Access Mode",
          "description": "Access mode for persistent volume",
          "enum": ["ReadWriteOnce", "ReadOnlyMany", "ReadWriteMany", "ReadWriteOncePod"]
        },
        "size": {
          "type": "string",
          "title": "Storage Size",
          "description": "Size of persistent volume",
          "pattern": "^\\d+(Ei|Pi|Ti|Gi|Mi|Ki|E|P|T|G|M|K)?$"
        },
        "mountPath": {
          "type": "string",
          "title": "Mount Path",
          "description": "Mount path for Redis data"
        },
        "annotations": {
          "type": "object",
          "title": "PVC Annotations",
          "description": "Annotations for persistent volume claims",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "persistentVolumeClaimRetentionPolicy": {
      "type": "object",
      "title": "PVC Retention Policy",
      "description": "Persistent Volume Claim retention policy for StatefulSet",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Retention Policy",
          "description": "Enable Persistent volume retention policy for the StatefulSet"
        },
        "whenScaled": {
          "type": "string",
          "title": "When Scaled",
          "description": "Volume retention behavior when the replica count of the StatefulSet is reduced",
          "enum": ["Retain", "Delete"],
          "default": "Retain"
        },
        "whenDeleted": {
          "type": "string",
          "title": "When Deleted",
          "description": "Volume retention behavior that applies when the StatefulSet is deleted",
          "enum": ["Retain", "Delete"],
          "default": "Retain"
        }
      }
    },
    "resources": {
      "type": "object",
      "title": "Resource Configuration",
      "description": "Resource limits and requests for Redis pod",
      "properties": {
        "limits": {
          "type": "object",
          "title": "Resource Limits",
          "description": "Resource limits for the container",
          "properties": {
            "cpu": {
              "oneOf": [
                {"type": "string"},
                {"type": "number"}
              ],
              "title": "CPU Limit",
              "description": "CPU resource limit"
            },
            "memory": {
              "type": "string",
              "title": "Memory Limit",
              "description": "Memory resource limit"
            }
          }
        },
        "requests": {
          "type": "object",
          "title": "Resource Requests",
          "description": "Resource requests for the container",
          "properties": {
            "cpu": {
              "oneOf": [
                {"type": "string"},
                {"type": "number"}
              ],
              "title": "CPU Request",
              "description": "CPU resource request"
            },
            "memory": {
              "type": "string",
              "title": "Memory Request",
              "description": "Memory resource request"
            }
          }
        }
      }
    },
    "nodeSelector": {
      "type": "object",
      "title": "Node Selector",
      "description": "Node selector for pod assignment",
      "additionalProperties": {
        "type": "string"
      }
    },
    "priorityClassName": {
      "type": "string",
      "title": "Priority Class Name",
      "description": "Name of the priority class"
    },
    "tolerations": {
      "type": "array",
      "title": "Tolerations",
      "description": "Tolerations for pod assignment",
      "items": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string"
          },
          "operator": {
            "type": "string",
            "enum": ["Equal", "Exists"]
          },
          "value": {
            "type": "string"
          },
          "effect": {
            "type": "string",
            "enum": ["NoSchedule", "PreferNoSchedule", "NoExecute"]
          },
          "tolerationSeconds": {
            "type": "integer",
            "minimum": 0
          }
        }
      }
    },
    "affinity": {
      "type": "object",
      "title": "Affinity Configuration",
      "description": "Affinity rules for pod assignment",
      "properties": {
        "nodeAffinity": {
          "type": "object",
          "title": "Node Affinity",
          "description": "Node affinity configuration"
        },
        "podAffinity": {
          "type": "object",
          "title": "Pod Affinity",
          "description": "Pod affinity configuration"
        },
        "podAntiAffinity": {
          "type": "object",
          "title": "Pod Anti-Affinity",
          "description": "Pod anti-affinity configuration"
        }
      }
    },
    "containerSecurityContext": {
      "type": "object",
      "title": "Container Security Context",
      "description": "Security context for the Redis container",
      "properties": {
        "runAsUser": {
          "type": "integer",
          "title": "Run As User",
          "description": "User ID to run the container",
          "minimum": 0
        },
        "runAsNonRoot": {
          "type": "boolean",
          "title": "Run As Non-Root",
          "description": "Run as non-root user"
        },
        "allowPrivilegeEscalation": {
          "type": "boolean",
          "title": "Allow Privilege Escalation",
          "description": "Set Redis container's privilege escalation"
        }
      }
    },
    "podSecurityContext": {
      "type": "object",
      "title": "Pod Security Context",
      "description": "Security context for the pod",
      "properties": {
        "fsGroup": {
          "type": "integer",
          "title": "FS Group",
          "description": "Set Redis pod's Security Context fsGroup",
          "minimum": 0
        }
      }
    },
    "livenessProbe": {
      "type": "object",
      "title": "Liveness Probe Configuration",
      "description": "Liveness probe configuration for Redis container",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Liveness Probe",
          "description": "Enable liveness probe"
        },
        "initialDelaySeconds": {
          "type": "integer",
          "title": "Initial Delay Seconds",
          "description": "Initial delay before starting probes",
          "minimum": 0
        },
        "periodSeconds": {
          "type": "integer",
          "title": "Period Seconds",
          "description": "How often to perform the probe",
          "minimum": 1
        },
        "timeoutSeconds": {
          "type": "integer",
          "title": "Timeout Seconds",
          "description": "Timeout for each probe attempt",
          "minimum": 1
        },
        "failureThreshold": {
          "type": "integer",
          "title": "Failure Threshold",
          "description": "Number of failures before pod is restarted",
          "minimum": 1
        },
        "successThreshold": {
          "type": "integer",
          "title": "Success Threshold",
          "description": "Number of successes to mark probe as successful",
          "minimum": 1
        }
      }
    },
    "readinessProbe": {
      "type": "object",
      "title": "Readiness Probe Configuration",
      "description": "Readiness probe configuration for Redis container",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Readiness Probe",
          "description": "Enable readiness probe"
        },
        "initialDelaySeconds": {
          "type": "integer",
          "title": "Initial Delay Seconds",
          "description": "Initial delay before starting probes",
          "minimum": 0
        },
        "periodSeconds": {
          "type": "integer",
          "title": "Period Seconds",
          "description": "How often to perform the probe",
          "minimum": 1
        },
        "timeoutSeconds": {
          "type": "integer",
          "title": "Timeout Seconds",
          "description": "Timeout for each probe attempt",
          "minimum": 1
        },
        "failureThreshold": {
          "type": "integer",
          "title": "Failure Threshold",
          "description": "Number of failures before pod is marked unready",
          "minimum": 1
        },
        "successThreshold": {
          "type": "integer",
          "title": "Success Threshold",
          "description": "Number of successes to mark probe as successful",
          "minimum": 1
        }
      }
    },
    "extraEnv": {
      "type": "array",
      "title": "Extra Environment Variables",
      "description": "Additional environment variables to set",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "title": "Variable Name",
            "description": "Environment variable name"
          },
          "value": {
            "type": "string",
            "title": "Variable Value",
            "description": "Environment variable value"
          }
        },
        "required": ["name"]
      }
    },
    "extraVolumes": {
      "type": "array",
      "title": "Extra Volumes",
      "description": "Additional volumes to add to the pod",
      "items": {
        "type": "object"
      }
    },
    "extraVolumeMounts": {
      "type": "array",
      "title": "Extra Volume Mounts",
      "description": "Additional volume mounts to add to the Redis container",
      "items": {
        "type": "object"
      }
    },
    "topologySpreadConstraints": {
      "type": "array",
      "title": "Topology Spread Constraints",
      "description": "Topology Spread Constraints for pod assignment",
      "items": {
        "type": "object"
      }
    },
    "podLabels": {
      "type": "object",
      "title": "Pod Labels",
      "description": "Map of labels to add to the pods",
      "additionalProperties": {
        "type": "string"
      }
    },
    "podAnnotations": {
      "type": "object",
      "title": "Pod Annotations",
      "description": "Map of annotations to add to the pods",
      "additionalProperties": {
        "type": "string"
      }
    },
    "initContainer": {
      "type": "object",
      "title": "Init Container Configuration",
      "description": "Resource configuration for Redis init container pod",
      "properties": {
        "resources": {
          "type": "object",
          "title": "Resource Configuration",
          "description": "Resource limits and requests for init container",
          "properties": {
            "limits": {
              "type": "object",
              "title": "Resource Limits",
              "description": "Resource limits for the init container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Limit",
                  "description": "CPU resource limit"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Limit",
                  "description": "Memory resource limit"
                }
              }
            },
            "requests": {
              "type": "object",
              "title": "Resource Requests",
              "description": "Resource requests for the init container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Request",
                  "description": "CPU resource request"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Request",
                  "description": "Memory resource request"
                }
              }
            }
          }
        }
      }
    },
    "sentinel": {
      "type": "object",
      "title": "Redis Sentinel Configuration",
      "description": "Configuration for Redis Sentinel high availability in replication mode",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Sentinel",
          "description": "Enable Redis Sentinel for high availability"
        },
        "image": {
          "type": "object",
          "title": "Sentinel Image Configuration",
          "description": "Configuration for Sentinel container image",
          "properties": {
            "repository": {
              "type": "string",
              "title": "Sentinel Image Repository",
              "description": "Redis Sentinel image repository"
            },
            "tag": {
              "type": "string",
              "title": "Sentinel Image Tag",
              "description": "Redis Sentinel image tag with digest"
            },
            "pullPolicy": {
              "type": "string",
              "title": "Sentinel Image Pull Policy",
              "description": "Redis Sentinel image pull policy",
              "enum": ["Always", "Never", "IfNotPresent"]
            }
          }
        },
        "masterName": {
          "type": "string",
          "title": "Master Name",
          "description": "Name of the master server",
          "default": "mymaster"
        },
        "quorum": {
          "type": "integer",
          "title": "Quorum",
          "description": "Number of Sentinels that need to agree about the fact the master is not reachable",
          "minimum": 1
        },
        "downAfterMilliseconds": {
          "type": "integer",
          "title": "Down After Milliseconds",
          "description": "Time in milliseconds after the master is declared down",
          "minimum": 1
        },
        "failoverTimeout": {
          "type": "integer",
          "title": "Failover Timeout",
          "description": "Timeout for failover in milliseconds",
          "minimum": 1
        },
        "parallelSyncs": {
          "type": "integer",
          "title": "Parallel Syncs",
          "description": "Number of replicas that can be reconfigured to use the new master during a failover",
          "minimum": 1
        },
        "port": {
          "type": "integer",
          "title": "Sentinel Port",
          "description": "Sentinel port",
          "minimum": 1,
          "maximum": 65535
        },
        "extraVolumeMounts": {
          "type": "array",
          "title": "Extra Volume Mounts",
          "description": "Additional volume mounts to add to the Sentinel container",
          "items": {
            "type": "object"
          }
        },
        "service": {
          "type": "object",
          "title": "Sentinel Service Configuration",
          "description": "Kubernetes service configuration for Sentinel",
          "properties": {
            "type": {
              "type": "string",
              "title": "Service Type",
              "description": "Kubernetes service type for Sentinel",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]
            },
            "port": {
              "type": "integer",
              "title": "Service Port",
              "description": "Sentinel service port",
              "minimum": 1,
              "maximum": 65535
            }
          }
        },
        "resources": {
          "type": "object",
          "title": "Resource Configuration",
          "description": "Resource limits and requests for Sentinel pod",
          "properties": {
            "limits": {
              "type": "object",
              "title": "Resource Limits",
              "description": "Resource limits for the Sentinel container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Limit",
                  "description": "CPU resource limit"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Limit",
                  "description": "Memory resource limit"
                }
              }
            },
            "requests": {
              "type": "object",
              "title": "Resource Requests",
              "description": "Resource requests for the Sentinel container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Request",
                  "description": "CPU resource request"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Request",
                  "description": "Memory resource request"
                }
              }
            }
          }
        }
      }
    },
    "metrics": {
      "type": "object",
      "title": "Metrics Configuration",
      "description": "Prometheus metrics configuration for Redis",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Metrics",
          "description": "Start a sidecar prometheus exporter to expose Redis metrics"
        },
        "image": {
          "type": "object",
          "title": "Metrics Image Configuration",
          "description": "Configuration for metrics exporter container image",
          "properties": {
            "registry": {
              "type": "string",
              "title": "Metrics Image Registry",
              "description": "Redis exporter image registry"
            },
            "repository": {
              "type": "string",
              "title": "Metrics Image Repository",
              "description": "Redis exporter image repository"
            },
            "tag": {
              "type": "string",
              "title": "Metrics Image Tag",
              "description": "Redis exporter image tag with digest"
            },
            "pullPolicy": {
              "type": "string",
              "title": "Metrics Image Pull Policy",
              "description": "Redis exporter image pull policy",
              "enum": ["Always", "Never", "IfNotPresent"]
            }
          }
        },
        "resources": {
          "type": "object",
          "title": "Resource Configuration",
          "description": "Resource limits and requests for metrics container",
          "properties": {
            "limits": {
              "type": "object",
              "title": "Resource Limits",
              "description": "Resource limits for the metrics container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Limit",
                  "description": "CPU resource limit"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Limit",
                  "description": "Memory resource limit"
                }
              }
            },
            "requests": {
              "type": "object",
              "title": "Resource Requests",
              "description": "Resource requests for the metrics container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Request",
                  "description": "CPU resource request"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Request",
                  "description": "Memory resource request"
                }
              }
            }
          }
        },
        "extraArgs": {
          "type": "array",
          "title": "Extra Arguments",
          "description": "Extra arguments for redis exporter",
          "items": {
            "type": "string"
          }
        },
        "service": {
          "type": "object",
          "title": "Metrics Service Configuration",
          "description": "Kubernetes service configuration for metrics",
          "properties": {
            "type": {
              "type": "string",
              "title": "Service Type",
              "description": "Metrics service type",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]
            },
            "port": {
              "type": "integer",
              "title": "Service Port",
              "description": "Metrics service port",
              "minimum": 1,
              "maximum": 65535
            },
            "annotations": {
              "type": "object",
              "title": "Service Annotations",
              "description": "Additional custom annotations for Metrics service",
              "additionalProperties": {
                "type": "string"
              }
            },
            "loadBalancerIP": {
              "type": "string",
              "title": "Load Balancer IP",
              "description": "Load balancer IP if metrics service type is LoadBalancer"
            },
            "loadBalancerSourceRanges": {
              "type": "array",
              "title": "Load Balancer Source Ranges",
              "description": "Addresses that are allowed when metrics service is LoadBalancer",
              "items": {
                "type": "string"
              }
            },
            "clusterIP": {
              "type": "string",
              "title": "Cluster IP",
              "description": "Static clusterIP or None for headless services when metrics service type is ClusterIP"
            },
            "nodePort": {
              "oneOf": [
                {"type": "string"},
                {"type": "integer"}
              ],
              "title": "Node Port",
              "description": "Specify the nodePort value for the LoadBalancer and NodePort service types"
            }
          }
        },
        "serviceMonitor": {
          "type": "object",
          "title": "Service Monitor Configuration",
          "description": "Prometheus ServiceMonitor configuration",
          "properties": {
            "enabled": {
              "type": "boolean",
              "title": "Enable Service Monitor",
              "description": "Create ServiceMonitor resource(s) for scraping metrics using PrometheusOperator"
            },
            "namespace": {
              "type": "string",
              "title": "Namespace",
              "description": "Namespace in which to create ServiceMonitor resource(s)"
            },
            "interval": {
              "type": "string",
              "title": "Interval",
              "description": "Interval at which metrics should be scraped"
            },
            "scrapeTimeout": {
              "type": "string",
              "title": "Scrape Timeout",
              "description": "Timeout after which the scrape is ended"
            },
            "relabelings": {
              "type": "array",
              "title": "Relabelings",
              "description": "Specify additional relabeling of metrics",
              "items": {
                "type": "object"
              }
            },
            "metricRelabelings": {
              "type": "array",
              "title": "Metric Relabelings",
              "description": "Specify additional metric relabeling of metrics",
              "items": {
                "type": "object"
              }
            },
            "honorLabels": {
              "type": "boolean",
              "title": "Honor Labels",
              "description": "Honor metrics labels"
            },
            "selector": {
              "type": "object",
              "title": "Selector",
              "description": "Prometheus instance selector labels",
              "additionalProperties": {
                "type": "string"
              }
            },
            "annotations": {
              "type": "object",
              "title": "Annotations",
              "description": "Additional custom annotations for the ServiceMonitor",
              "additionalProperties": {
                "type": "string"
              }
            },
            "namespaceSelector": {
              "type": "object",
              "title": "Namespace Selector",
              "description": "Namespace selector for ServiceMonitor",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "extraObjects": {
      "type": "array",
      "title": "Extra Objects",
      "description": "A list of additional Kubernetes objects to deploy alongside the release. Helm templating is supported in any field, but all template expressions must be quoted. Each item should be a valid Kubernetes manifest object.",
      "items": {
        "type": "object",
        "description": "A Kubernetes manifest object. All fields are allowed."
      }
    }
  }
}
