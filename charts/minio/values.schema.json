{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "MinIO Helm Chart Values Schema",
  "description": "Schema for MinIO Helm chart values",
  "properties": {
    "global": {
      "type": "object",
      "title": "Global Parameters",
      "description": "Global Docker image parameters",
      "properties": {
        "imageRegistry": {
          "type": "string",
          "title": "Global Docker Image Registry",
          "description": "Global Docker image registry"
        },
        "imagePullSecrets": {
          "type": "array",
          "items": {
            "type": ["string", "object"],
            "properties": {
              "name": { "type": "string" }
            },
            "required": ["name"]
          }
        }
      }
    },
    "image": {
      "type": "object",
      "title": "MinIO Image Configuration",
      "description": "MinIO container image configuration",
      "properties": {
        "registry": {
          "type": "string",
          "title": "MinIO Image Registry",
          "description": "MinIO image registry"
        },
        "repository": {
          "type": "string",
          "title": "MinIO Image Repository",
          "description": "MinIO image repository"
        },
        "tag": {
          "type": "string",
          "title": "MinIO Image Tag",
          "description": "MinIO image tag with digest"
        },
        "imagePullPolicy": {
          "type": "string",
          "title": "MinIO Image Pull Policy",
          "description": "MinIO image pull policy",
          "enum": ["Always", "Never", "IfNotPresent"]
        }
      }
    },
    "auth": {
      "type": "object",
      "title": "MinIO Authentication",
      "description": "MinIO Authentication configuration",
      "properties": {
        "rootUser": {
          "type": "string",
          "title": "MinIO Root Username",
          "description": "MinIO root username"
        },
        "rootPassword": {
          "type": "string",
          "title": "MinIO Root Password",
          "description": "MinIO root password. If not set, a random password will be generated"
        },
        "existingSecret": {
          "type": "string",
          "title": "Existing Secret",
          "description": "Name of existing secret containing MinIO credentials"
        },
        "existingSecretUserKey": {
          "type": "string",
          "title": "Existing Secret User Key",
          "description": "Key in existing secret containing username"
        },
        "existingSecretPasswordKey": {
          "type": "string",
          "title": "Existing Secret Password Key",
          "description": "Key in existing secret containing password"
        }
      }
    },
    "config": {
      "type": "object",
      "title": "MinIO Configuration",
      "description": "MinIO configuration parameters",
      "properties": {
        "region": {
          "type": "string",
          "title": "MinIO Server Region",
          "description": "MinIO server default region"
        },
        "browserEnabled": {
          "type": "boolean",
          "title": "Browser Enabled",
          "description": "Enable MinIO web browser"
        },
        "domain": {
          "type": "string",
          "title": "MinIO Server Domain",
          "description": "MinIO server domain"
        },
        "serverUrl": {
          "type": "string",
          "title": "MinIO Server URL",
          "description": "MinIO server URL for console"
        },
        "minioOpts": {
          "type": "string",
          "title": "MinIO Server Options",
          "description": "String of parameteres to use when starting the MinIO Server"
        },
        "minioVolumes": {
          "type": "string",
          "title": "MinIO Volume directories",
          "description": "The directories or drives the minio server uses as the storage backend"
        },
        "minioConfigEnvFile": {
          "type": "string",
          "title": "MinIO Config Environment File",
          "description": "Path to environment file for MinIO to load variables from"
        },
        "minioScannerSpeed": {
          "type": "string",
          "enum": ["fastest", "fast", "default", "slow", "slowest", ""],
          "title": "MinIO Scanner Speed",
          "description": "Manage the maximum wait period for the scanner when balancing MinIO read/write performance to scanner processes"
        },
        "minioCompressionEnabled": {
          "type": "string",
          "enum": ["on", "off", ""],
          "title": "MinIO Compression Enabled",
          "description": "Set to on to enable data compression for new objects"
        },
        "minioCompressionAllowEncryption": {
          "type": "string",
          "enum": ["on", "off", ""],
          "title": "MinIO Compression Allow Encryption",
          "description": "Set to on to encrypt objects after compressing them"
        },
        "minioCompressionExtensions": {
          "type": "string",
          "title": "MinIO Compression Extentions",
          "description": "Comma-separated list of the file extensions to compress"
        },
        "minioCompressionMimeTypes": {
          "type": "string",
          "title": "MinIO Compression MimeTypes",
          "description": "Comma-separated list of the MIME types to compress"
        },
        "extraEnvVars": {
          "type": "array",
          "title": "Extra Environment Variables",
          "description": "Extra environment variables to be set on MinIO containers",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "title": "Variable Name",
                "description": "Environment variable name"
              },
              "value": {
                "type": "string",
                "title": "Variable Value",
                "description": "Environment variable value"
              }
            },
            "required": ["name"]
          }
        }
      }
    },
    "defaultBuckets": {
      "type": "string",
      "title": "Default Buckets",
      "description": "Comma, semi-colon or space separated list of buckets to create at initialization"
    },
    "bucketInitJob": {
      "type": "object",
      "title": "Bucket Initialization Job Configuration",
      "description": "Configuration for the bucket initialization job",
      "properties": {
        "ttlSecondsAfterFinished": {
          "type": "integer",
          "title": "TTL Seconds After Finished",
          "description": "Seconds after which the job is automatically deleted after completion (success or failure)",
          "minimum": 0,
          "default": 300
        },
        "activeDeadlineSeconds": {
          "type": "integer",
          "title": "Active Deadline Seconds",
          "description": "Maximum duration in seconds for the job execution before it is terminated",
          "minimum": 1,
          "default": 300
        },
        "completions": {
          "type": "integer",
          "title": "Completions",
          "description": "Number of successful completions required for the job",
          "minimum": 1,
          "default": 1
        },
        "parallelism": {
          "type": "integer",
          "title": "Parallelism",
          "description": "Number of pods running in parallel",
          "minimum": 1,
          "default": 1
        },
        "backoffLimit": {
          "type": "integer",
          "title": "Backoff Limit",
          "description": "Number of retries before considering the job as failed",
          "minimum": 0,
          "default": 3
        },
        "restartPolicy": {
          "type": "string",
          "title": "Restart Policy",
          "description": "Restart policy for the job pods",
          "enum": ["OnFailure", "Never"],
          "default": "OnFailure"
        },
        "annotations": {
          "type": "object",
          "title": "Job Annotations",
          "description": "Additional annotations for the bucket initialization job",
          "additionalProperties": {
            "type": "string"
          },
          "default": {}
        },
        "podAnnotations": {
          "type": "object",
          "title": "Pod Annotations",
          "description": "Additional annotations for the bucket initialization job pods",
          "additionalProperties": {
            "type": "string"
          },
          "default": {}
        },
        "resources": {
          "type": "object",
          "title": "Resource Configuration",
          "description": "Resource requests and limits for the bucket initialization job",
          "properties": {
            "limits": {
              "type": "object",
              "title": "Resource Limits",
              "description": "Resource limits for the container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Limit",
                  "description": "CPU resource limit"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Limit",
                  "description": "Memory resource limit"
                }
              }
            },
            "requests": {
              "type": "object",
              "title": "Resource Requests",
              "description": "Resource requests for the container",
              "properties": {
                "cpu": {
                  "oneOf": [
                    {"type": "string"},
                    {"type": "number"}
                  ],
                  "title": "CPU Request",
                  "description": "CPU resource request"
                },
                "memory": {
                  "type": "string",
                  "title": "Memory Request",
                  "description": "Memory resource request"
                }
              }
            }
          },
          "default": {}
        }
      }
    },
    "replicaCount": {
      "type": "integer",
      "title": "Replica Count",
      "description": "Number of MinIO replicas to deploy",
      "minimum": 1
    },
    "nameOverride": {
      "type": "string",
      "title": "Name Override",
      "description": "String to partially override minio.fullname"
    },
    "fullnameOverride": {
      "type": "string",
      "title": "Full Name Override",
      "description": "String to fully override minio.fullname"
    },
    "commonLabels": {
      "type": "object",
      "title": "Common Labels",
      "description": "Labels to add to all deployed objects",
      "additionalProperties": {
        "type": "string"
      }
    },
    "commonAnnotations": {
      "type": "object",
      "title": "Common Annotations",
      "description": "Annotations to add to all deployed objects",
      "additionalProperties": {
        "type": "string"
      }
    },
    "podAnnotations": {
      "type": "object",
      "title": "Pod Annotations",
      "description": "Pod annotations and labels",
      "additionalProperties": {
        "type": "string"
      }
    },
    "podLabels": {
      "type": "object",
      "title": "Pod Labels",
      "description": "Pod labels",
      "additionalProperties": {
        "type": "string"
      }
    },
    "podSecurityContext": {
      "type": "object",
      "title": "Pod Security Context",
      "description": "Security Context configuration",
      "properties": {
        "fsGroup": {
          "type": "integer",
          "title": "FS Group",
          "description": "Group ID for the volumes of the pod",
          "minimum": 0
        }
      }
    },
    "containerSecurityContext": {
      "type": "object",
      "title": "Security Context",
      "description": "Container security context",
      "properties": {
        "allowPrivilegeEscalation": {
          "type": "boolean",
          "title": "Allow Privilege Escalation",
          "description": "Enable container privilege escalation"
        },
        "runAsNonRoot": {
          "type": "boolean",
          "title": "Run As Non-Root",
          "description": "Configure the container to run as a non-root user"
        },
        "runAsUser": {
          "type": "integer",
          "title": "Run As User",
          "description": "User ID for the MinIO container",
          "minimum": 0
        },
        "runAsGroup": {
          "type": "integer",
          "title": "Run As Group",
          "description": "Group ID for the MinIO container",
          "minimum": 0
        },
        "readOnlyRootFilesystem": {
          "type": "boolean",
          "title": "Read-Only Root Filesystem",
          "description": "Mount container root filesystem as read-only"
        },
        "capabilities": {
          "type": "object",
          "title": "Capabilities",
          "description": "Linux capabilities configuration",
          "properties": {
            "drop": {
              "type": "array",
              "title": "Drop Capabilities",
              "description": "Linux capabilities to be dropped",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "service": {
      "type": "object",
      "title": "Service Configuration",
      "description": "Service configuration parameters",
      "properties": {
        "type": {
          "type": "string",
          "title": "Service Type",
          "description": "MinIO service type",
          "enum": ["ClusterIP", "NodePort", "LoadBalancer", "ExternalName"]
        },
        "port": {
          "type": "integer",
          "title": "Service Port",
          "description": "MinIO service port",
          "minimum": 1,
          "maximum": 65535
        },
        "consolePort": {
          "type": "integer",
          "title": "Console Service Port",
          "description": "MinIO console service port",
          "minimum": 1,
          "maximum": 65535
        },
        "annotations": {
          "type": "object",
          "title": "Service Annotations",
          "description": "Service annotations",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "ingress": {
      "type": "object",
      "title": "Ingress Configuration",
      "description": "Ingress configuration parameters",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "Enable Ingress",
          "description": "Enable ingress record generation for MinIO"
        },
        "className": {
          "type": "string",
          "title": "Ingress Class Name",
          "description": "IngressClass that will be used to implement the Ingress"
        },
        "annotations": {
          "type": "object",
          "title": "Ingress Annotations",
          "description": "Additional annotations for the Ingress resource",
          "additionalProperties": {
            "type": "string"
          }
        },
        "hosts": {
          "type": "array",
          "title": "Ingress Hosts",
          "description": "Ingress hosts configuration",
          "items": {
            "type": "object",
            "properties": {
              "host": {
                "type": "string",
                "title": "Host",
                "description": "Hostname for MinIO ingress"
              },
              "paths": {
                "type": "array",
                "title": "Paths",
                "description": "Paths configuration for the host",
                "items": {
                  "type": "object",
                  "properties": {
                    "path": {
                      "type": "string",
                      "title": "Path",
                      "description": "Path for MinIO ingress"
                    },
                    "pathType": {
                      "type": "string",
                      "title": "Path Type",
                      "description": "Path type for MinIO ingress",
                      "enum": ["Exact", "Prefix", "ImplementationSpecific"]
                    }
                  }
                }
              }
            }
          }
        },
        "tls": {
          "type": "array",
          "title": "TLS Configuration",
          "description": "TLS configuration for MinIO ingress",
          "items": {
            "type": "object"
        },
        "auth": {
            "type": "object",
            "properties": {
                "existingSecret": {
                    "type": "string"
                },
                "existingSecretPasswordKey": {
                    "type": "string"
                },
                "existingSecretUserKey": {
                    "type": "string"
                },
                "rootPassword": {
                    "type": "string"
                },
                "rootUser": {
                    "type": "string"
                }
            }
        },
        "commonAnnotations": {
            "type": "object"
        },
        "commonLabels": {
            "type": "object"
        },
        "config": {
            "type": "object",
            "properties": {
                "browserEnabled": {
                    "type": "boolean"
                },
                "domain": {
                    "type": "string"
                },
                "extraEnvVars": {
                    "type": "array"
                },
                "minioCompressionAllowEncryption": {
                    "type": "string"
                },
                "minioCompressionEnabled": {
                    "type": "string"
                },
                "minioCompressionExtensions": {
                    "type": "string"
                },
                "minioCompressionMimeTypes": {
                    "type": "string"
                },
                "minioConfigEnvFile": {
                    "type": "string"
                },
                "minioOpts": {
                    "type": "string"
                },
                "minioScannerSpeed": {
                    "type": "string"
                },
                "minioVolumes": {
                    "type": "string"
                },
                "region": {
                    "type": "string"
                },
                "serverUrl": {
                    "type": "string"
                }
            }
        },
        "consoleIngress": {
            "type": "object",
            "properties": {
                "annotations": {
                    "type": "object"
                },
                "className": {
                    "type": "string"
                },
                "enabled": {
                    "type": "boolean"
                },
                "hosts": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "host": {
                                "type": "string"
                            },
                            "paths": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "path": {
                                            "type": "string"
                                        },
                                        "pathType": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tls": {
                    "type": "array"
                }
            }
        },
        "containerSecurityContext": {
            "type": "object",
            "properties": {
                "allowPrivilegeEscalation": {
                    "type": "boolean"
                },
                "capabilities": {
                    "type": "object",
                    "properties": {
                        "drop": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "readOnlyRootFilesystem": {
                    "type": "boolean"
                },
                "runAsGroup": {
                    "type": "integer"
                },
                "runAsNonRoot": {
                    "type": "boolean"
                },
                "runAsUser": {
                    "type": "integer"
                }
            }
        },
        "defaultBuckets": {
            "type": "string"
        },
        "extraObjects": {
            "type": "array"
        },
        "fullnameOverride": {
            "type": "string"
        },
        "global": {
            "type": "object",
            "properties": {
                "imagePullSecrets": {
                    "type": "array"
                },
                "imageRegistry": {
                    "type": "string"
                }
            }
        },
        "image": {
            "type": "object",
            "properties": {
                "imagePullPolicy": {
                    "type": "string"
                },
                "registry": {
                    "type": "string"
                },
                "repository": {
                    "type": "string"
                },
                "tag": {
                    "type": "string"
                },
                "tagCpuV1": {
                    "type": "string"
                },
                "useCpuV1": {
                    "type": "boolean"
                }
            }
        },
        "ingress": {
            "type": "object",
            "properties": {
                "annotations": {
                    "type": "object"
                },
                "className": {
                    "type": "string"
                },
                "enabled": {
                    "type": "boolean"
                },
                "hosts": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "host": {
                                "type": "string"
                            },
                            "paths": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "path": {
                                            "type": "string"
                                        },
                                        "pathType": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "tls": {
                    "type": "array"
                }
            }
        },
        "livenessProbe": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean"
                },
                "failureThreshold": {
                    "type": "integer"
                },
                "initialDelaySeconds": {
                    "type": "integer"
                },
                "periodSeconds": {
                    "type": "integer"
                },
                "successThreshold": {
                    "type": "integer"
                },
                "timeoutSeconds": {
                    "type": "integer"
                }
            }
        },
        "nameOverride": {
            "type": "string"
        },
        "nodeSelector": {
            "type": "object"
        },
        "persistence": {
            "type": "object",
            "properties": {
                "accessModes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "annotations": {
                    "type": "object"
                },
                "enabled": {
                    "type": "boolean"
                },
                "existingClaim": {
                    "type": "string"
                },
                "mountPath": {
                    "type": "string"
                },
                "size": {
                    "type": "string"
                },
                "storageClass": {
                    "type": "string"
                }
            }
        },
        "podAnnotations": {
            "type": "object"
        },
        "podLabels": {
            "type": "object"
        },
        "podSecurityContext": {
            "type": "object",
            "properties": {
                "fsGroup": {
                    "type": "integer"
                }
            }
        },
        "readinessProbe": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean"
                },
                "failureThreshold": {
                    "type": "integer"
                },
                "initialDelaySeconds": {
                    "type": "integer"
                },
                "periodSeconds": {
                    "type": "integer"
                },
                "successThreshold": {
                    "type": "integer"
                },
                "timeoutSeconds": {
                    "type": "integer"
                }
            }
        },
        "replicaCount": {
            "type": "integer"
        },
        "resources": {
            "type": "object"
        },
        "service": {
            "type": "object",
            "properties": {
                "annotations": {
                    "type": "object"
                },
                "consolePort": {
                    "type": "integer"
                },
                "port": {
                    "type": "integer"
                },
                "type": {
                    "type": "string"
                }
            }
        },
        "serviceAccount": {
            "type": "object",
            "properties": {
                "annotations": {
                    "type": "object"
                },
                "automountServiceAccountToken": {
                    "type": "boolean"
                },
                "create": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "startupProbe": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean"
                },
                "failureThreshold": {
                    "type": "integer"
                },
                "initialDelaySeconds": {
                    "type": "integer"
                },
                "periodSeconds": {
                    "type": "integer"
                },
                "successThreshold": {
                    "type": "integer"
                },
                "timeoutSeconds": {
                    "type": "integer"
                }
            }
        },
        "tolerations": {
            "type": "array"
        }
    }
}
